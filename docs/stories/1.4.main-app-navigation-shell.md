# Story 1.4: Main App Navigation Shell

## Status
Done

## Story
**As a** User,
**I want** to see the main application interface after logging in,
**so that** I can navigate between the core sections of the app.

## Acceptance Criteria
1. A main screen is built in Flutter that uses a `PageView` or `TabBarView` to manage two primary views.
2. The user can slide/swipe horizontally between the "Chat" view (Page 1) and the "Dashboard" view (Page 2).
3. Both the Chat and Dashboard views are simple placeholder widgets for this story.
4. A navigation element (e.g., bottom tabs or a segmented control) indicates the active view.

## Tasks / Subtasks
- [x] Task 1: Set up main navigation screen structure (AC: 1)
  - [x] Create `MainNavigationScreen` widget in `/lib/screens/` directory
  - [x] Implement `PageView` for managing two primary views
  - [x] Set up proper screen routing from login screen (Story 1.5 dependency)
  - [x] Configure screen with Material Design 3 theming

- [x] Task 2: Create Chat view placeholder (AC: 2, 3)
  - [x] Create `ChatScreen` widget with placeholder content
  - [x] Add basic UI elements (title, placeholder text, icon)
  - [x] Implement proper Material 3 design with cards/containers
  - [x] Add placeholder for future chat functionality

- [x] Task 3: Create Dashboard view placeholder (AC: 2, 3)
  - [x] Create `DashboardScreen` widget with placeholder content
  - [x] Add basic UI elements (title, placeholder text, icon)
  - [x] Implement proper Material 3 design with cards/containers
  - [x] Add placeholder for future dashboard functionality

- [x] Task 4: Implement navigation controls (AC: 4)
  - [x] Add bottom navigation bar with Chat and Dashboard tabs
  - [x] Implement tab selection logic to switch between views
  - [x] Add visual indicators for active tab
  - [x] Ensure navigation state persists during screen transitions

- [x] Task 5: Implement swipe gesture handling (AC: 2)
  - [x] Configure PageView for horizontal swipe gestures
  - [x] Synchronize swipe gestures with navigation tab selection
  - [x] Add smooth page transitions and animations
  - [x] Handle edge cases (first/last page swipe boundaries)

- [x] Task 6: Add responsive design considerations (AC: 1-4)
  - [x] Ensure proper layout on different screen sizes
  - [x] Implement proper spacing and padding using Material 3 guidelines
  - [x] Add accessibility features (proper labels, focus management)
  - [x] Test layout on various device orientations

## Dev Notes

### Flutter Architecture Requirements
[Source: architecture/coding-standards.md]
- **State Management:** Use Provider pattern established in Story 1.1
- **Screen Structure:** Follow Flutter best practices with proper widget composition
- **Navigation:** Implement clean navigation patterns for future expansion
- **Material Design 3:** Use Material 3 components throughout for consistency

### UI Component Specifications
[Source: front-end-spec.md]
- **Navigation Pattern:** Bottom navigation bar with icons and labels
- **PageView Implementation:** Horizontal swipe with smooth transitions
- **Placeholder Design:** Clean, professional placeholder screens with clear labels
- **Responsive Layout:** Support for mobile and tablet form factors

### Screen Flow Integration
This story establishes the main navigation shell that will be:
- **Entry Point:** Primary destination after login (Story 1.5)
- **Profile Access:** Navigation to Profile screen (Story 1.6)
- **Future Expansion:** Foundation for additional screens and features

### Navigation State Management
- **Current View Tracking:** Maintain state of active tab/page
- **Persistence:** Remember user's last viewed section
- **Deep Linking:** Prepare for future deep linking capabilities
- **Back Navigation:** Proper handling of Android back button

### Placeholder Screen Requirements
**Chat Screen Placeholder:**
- Title: "AI Chat Assistant"
- Icon: Chat bubble or robot icon
- Description: "Your AI financial assistant will appear here"
- Background: Clean gradient or solid color

**Dashboard Screen Placeholder:**
- Title: "Financial Dashboard"
- Icon: Dashboard/analytics icon
- Description: "Your financial overview will appear here"
- Background: Clean gradient or solid color

### Material Design 3 Implementation
[Source: pubspec.yaml dependencies]
- Use `BottomNavigationBar` with Material 3 styling
- Implement `PageView` with `PageController` for swipe handling
- Apply proper theming with `Theme.of(context)` usage
- Ensure proper contrast ratios and accessibility

### Future Integration Points
This navigation shell will serve as the foundation for:
- **Chat Integration:** Real chat interface in future stories
- **Dashboard Data:** Financial data visualization components
- **Profile Access:** Navigation to user profile and settings
- **Additional Screens:** Expansion room for new app sections

### Testing Considerations
- **Gesture Testing:** Verify swipe gestures work smoothly
- **Navigation Testing:** Ensure tab switching updates page view
- **State Testing:** Verify navigation state persistence
- **Responsive Testing:** Test on different screen sizes and orientations

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-09-17 | 1.0 | Initial story draft creation | Scrum Master |
| 2025-09-17 | 1.1 | Story implementation completed | Dev Agent |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

### Agent Model Used
GitHub Copilot (Claude 3.5 Sonnet)

### Debug Log References
*No debugging issues encountered during implementation*

### Completion Notes List
- ✅ Created comprehensive MainNavigationScreen with PageView implementation
- ✅ Implemented ChatScreen placeholder with Material 3 design and feature cards
- ✅ Created DashboardScreen placeholder with grid layout and financial feature previews
- ✅ Added bottom NavigationBar with proper Material 3 styling and active indicators
- ✅ Synchronized PageView swipe gestures with navigation tab selection
- ✅ Implemented smooth page transitions with 300ms duration and easeInOut curve
- ✅ Added proper state management for current page tracking
- ✅ Updated main.dart to use MainNavigationScreen as app home
- ✅ Applied Material 3 theming throughout with consistent color scheme
- ✅ Added accessibility features with proper tooltips and labels
- ✅ Created responsive layouts that work on different screen sizes
- ✅ Implemented placeholder for Profile screen navigation (Story 1.6 dependency)
- ✅ Added proper disposal of PageController for memory management
- ✅ Successfully built and tested the application

### File List
**Created Files:**
- `app/lib/screens/main_navigation_screen.dart` - Main navigation shell with PageView and bottom navigation
- `app/lib/screens/chat_screen.dart` - Chat placeholder screen with AI assistant theming
- `app/lib/screens/dashboard_screen.dart` - Dashboard placeholder screen with financial features grid

**Modified Files:**
- `app/lib/main.dart` - Updated to use MainNavigationScreen as home and applied Material 3 theming

**Referenced Files:**
- `app/pubspec.yaml` - Verified Provider dependency for future state management

## QA Results
*Results from QA Agent QA review will be populated here after implementation*
